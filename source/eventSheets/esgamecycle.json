{
	"name": "ESGameCycle",
	"events": [
		{
			"eventType": "variable",
			"name": "IS_GAME_LOOP",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 253604682005448
		},
		{
			"eventType": "variable",
			"name": "loop_time",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 884284406643561
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "TIMER",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 878883168252005,
							"parameters": {
								"variable": "IS_GAME_LOOP"
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 641106787313193,
							"parameters": {
								"variable": "loop_time",
								"value": "dt"
							}
						},
						{
							"id": "set-text",
							"objectClass": "SFgameStatus",
							"sid": 460114123437231,
							"parameters": {
								"text": "floor(loop_time / 60) &\":\"& floor((loop_time ) % 60)"
							}
						}
					],
					"sid": 645918402930633,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-host",
									"objectClass": "Multiplayer",
									"sid": 459876619367282
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 521224695367822,
									"parameters": {
										"first-value": "loop_time",
										"comparison": 3,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "endTimer",
									"sid": 642110474664281
								}
							],
							"sid": 226996724711124
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-host",
									"objectClass": "Multiplayer",
									"sid": 745609778258020
								},
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 665751293333095,
									"parameters": {
										"interval-seconds": "JSONSettings.Get(\"game.dropRespawnTime\")"
									}
								}
							],
							"actions": [
								{
									"callFunction": "createDrop",
									"sid": 636686034941817
								}
							],
							"sid": 827263845115744
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 552236323467581,
							"parameters": {
								"variable": "IS_GAME_LOOP"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "SFgameStatus",
							"sid": 632341509731583,
							"parameters": {
								"text": "\"wating\""
							}
						}
					],
					"sid": 922785093670590
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-peer-message",
							"objectClass": "Multiplayer",
							"sid": 759850521287964,
							"parameters": {
								"tag": "\"beginTimer\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "beginTimer",
							"sid": 380647219554580
						}
					],
					"sid": 692896471892044
				},
				{
					"functionName": "beginTimer",
					"functionDescription": "",
					"functionCategory": "game cycle",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 516115502258676,
							"parameters": {
								"variable": "loop_time",
								"value": "JSONSettings.Get(\"game.roundTime\")"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 648888569557067,
							"parameters": {
								"variable": "IS_GAME_LOOP",
								"value": "true"
							}
						}
					],
					"sid": 557686684107888,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "SPlayer",
									"sid": 453270781727216,
									"parameters": {
										"instance-variable": "pid",
										"comparison": 0,
										"value": "Multiplayer.MyID"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 185669159702073,
									"parameters": {
										"instance-variable": "need_1",
										"value": "floor(random(JSONSettings.Get(\"game.itemTypes\")))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 212438261661027,
									"parameters": {
										"instance-variable": "need_2",
										"value": "floor(random(JSONSettings.Get(\"game.itemTypes\")))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 180315970586134,
									"parameters": {
										"instance-variable": "need_3",
										"value": "floor(random(JSONSettings.Get(\"game.itemTypes\")))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 918767149094249,
									"parameters": {
										"instance-variable": "pick_1",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 791450917950842,
									"parameters": {
										"instance-variable": "pick_2",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 296354952110143,
									"parameters": {
										"instance-variable": "pick_3",
										"value": "-1"
									}
								}
							],
							"sid": 182034741753304
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-host",
									"objectClass": "Multiplayer",
									"sid": 334775349530815
								}
							],
							"actions": [
								{
									"id": "broadcast-message",
									"objectClass": "Multiplayer",
									"sid": 560189896531419,
									"parameters": {
										"from-id": "Multiplayer.HostID",
										"tag": "\"beginTimer\"",
										"message": "\"\"",
										"mode": "reliable-ordered"
									}
								},
								{
									"callFunction": "createDrop",
									"sid": 169282340288119
								},
								{
									"callFunction": "createDrop",
									"sid": 982725840970923
								},
								{
									"callFunction": "createDrop",
									"sid": 939787259959559
								},
								{
									"callFunction": "createDrop",
									"sid": 673775428767759
								},
								{
									"callFunction": "createDrop",
									"sid": 117102610926779
								}
							],
							"sid": 698393698627649
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-peer-message",
							"objectClass": "Multiplayer",
							"sid": 222543966266056,
							"parameters": {
								"tag": "\"endTimer\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "todo получить рассчёты наград"
						},
						{
							"callFunction": "endTimer",
							"sid": 981635141995421
						}
					],
					"sid": 826612876937267
				},
				{
					"functionName": "endTimer",
					"functionDescription": "",
					"functionCategory": "game cycle",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 248570443315063,
							"parameters": {
								"variable": "IS_GAME_LOOP",
								"value": "false"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 707394070623150,
							"parameters": {
								"variable": "loop_time",
								"value": "0"
							}
						}
					],
					"sid": 634833461876276,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "SPlayer",
									"sid": 693251930020806,
									"parameters": {
										"instance-variable": "pid",
										"comparison": 0,
										"value": "Multiplayer.MyID"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 713385415272104,
									"parameters": {
										"instance-variable": "pick_1",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 952898528948562,
									"parameters": {
										"instance-variable": "pick_2",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 705873663418339,
									"parameters": {
										"instance-variable": "pick_3",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 221834564702405,
									"parameters": {
										"instance-variable": "need_1",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 976844038619496,
									"parameters": {
										"instance-variable": "need_2",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SPlayer",
									"sid": 681563571281164,
									"parameters": {
										"instance-variable": "need_3",
										"value": "-1"
									}
								}
							],
							"sid": 721914901259173
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-host",
									"objectClass": "Multiplayer",
									"sid": 376389988360242
								}
							],
							"actions": [
								{
									"id": "broadcast-message",
									"objectClass": "Multiplayer",
									"sid": 663466402193985,
									"parameters": {
										"from-id": "Multiplayer.HostID",
										"tag": "\"endTimer\"",
										"message": "\"\"",
										"mode": "reliable-ordered"
									}
								},
								{
									"type": "comment",
									"text": "todo сделать рассчёты наград, отправить их"
								}
							],
							"sid": 634568743927536,
							"children": [
								{
									"eventType": "comment",
									"text": "очистить всё"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 534165883297812,
											"parameters": {
												"object": "SDrop"
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "SDrop",
											"sid": 114502965418976
										}
									],
									"sid": 188541388180691
								}
							]
						}
					]
				}
			],
			"sid": 386057384558933
		}
	],
	"sid": 507380997762675
}